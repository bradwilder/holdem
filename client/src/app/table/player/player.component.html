<div [ngClass]="{empty: !player, 'next-action': player && nextActionPlayer && nextActionPlayer.name === player.name}" class="player-box">
	<ng-container *ngIf="player; then player_box; else player_box_empty"></ng-container>
</div>

<ng-template #player_box>
	<p>{{ player.name }}</p>
	<p>{{ player.chips }}</p>
</ng-template>

<ng-template #player_box_empty>
	<ng-container *ngIf="currentPlayer && currentTable === null; then join; else open"></ng-container>
	
	<ng-template #open>
		<span>Open</span>
	</ng-template>
	
	<ng-template #join>
		<span class="join-link" (click)="onJoinTable()">Join</span>
	</ng-template>
</ng-template>

<ng-container *ngIf="player && player.isInHand">
	<ng-container *ngIf="player.holeCards.length == 2; then hole_cards_showing; else hole_cards_hidden"></ng-container>
</ng-container>

<ng-template #hole_cards_hidden>
	<ng-container *ngIf="player.isInHand">
		<div class="hole-cards--hidden">
			<img class="hole-card--hidden bottom" src="assets/cards/back-design-purple.svg">
			<img class="hole-card--hidden" src="assets/cards/back-design-purple.svg">
		</div>
	</ng-container>
</ng-template>

<ng-template #hole_cards_showing>
	<div class="hole-cards--showing" [ngClass]="{'active-player': currentPlayer && player.name === currentPlayer.name, 'not-in-hand': !player.isInHand}">
		<img class="hole-card--showing bottom" [src]="'assets/cards/' + player.holeCards[0] + '.svg'">
		<img class="hole-card--showing top" [src]="'assets/cards/' + player.holeCards[1] + '.svg'">
	</div>
</ng-template>

<div *ngIf="player" class="action-box">
	<app-player-action [ongoingRoundAction]='player.ongoingRoundAction'></app-player-action>
</div>

<div *ngIf="player && player.isDealer" class="dealer-button">D</div>
